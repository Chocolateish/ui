var j=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var l=(s,e,t)=>(j(s,e,"read from private field"),t?t.call(s):e.get(s)),S=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},d=(s,e,t,r)=>(j(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();let de=class{constructor(e,t,r){this.type=e,this.target=t,this.data=r}},pe=class{constructor(e){this.eventHandler_ListenerStorage={},this.target=e}on(e,t){let r=this.eventHandler_ListenerStorage[e];return r?r.indexOf(t)==-1?r.push(t):console.warn("Subscriber already in handler"):this.eventHandler_ListenerStorage[e]=[t],t}once(e,t){return this.on(e,function(r){return t(r),!0}),t}off(e,t){let r=this.eventHandler_ListenerStorage[e];if(r){let n=r.indexOf(t);n!=-1?r.splice(n,1):console.warn("Subscriber not in handler")}return t}emit(e,t){let r=this.eventHandler_ListenerStorage[e];if(r&&r.length>0){let n=Object.freeze(new de(e,this.target,t));r.length>1&&(r=[...r]);for(let i=0,o=r.length;i<o;i++)try{r[i](n)===!0&&(r.splice(i,1),o--,i--)}catch(c){console.warn("Failed while dispatching event",c)}}}clear(e){this.eventHandler_ListenerStorage[e]=[]}inUse(e){var t;return!!((t=this.eventHandler_ListenerStorage[e])!=null&&t.length)}has(e,t){var r;return((r=this.eventHandler_ListenerStorage[e])==null?void 0:r.indexOf(t))!==-1}amount(e){var t;return((t=this.eventHandler_ListenerStorage[e])==null?void 0:t.length)||0}};var me=Object.defineProperty,ge=(s,e,t)=>e in s?me(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,z=(s,e,t)=>(ge(s,typeof e!="symbol"?e+"":e,t),t);let we=class{constructor(e){z(this,"_documents"),z(this,"main"),z(this,"_events"),z(this,"events"),this.main=e,this._documents=[e],this.events=this._events=new pe(this),this._events.target=this}forDocuments(e){for(let t=0;t<this._documents.length;t++)e(this._documents[t])}get documents(){return[...this._documents]}registerDocument(e,t){if(this._documents.includes(e))return console.warn("Document registered twice");if(this._documents.push(e),t){let r=this.main.head.children;for(let n=0;n<r.length;n++)switch(r[n].nodeName){case"LINK":if(r[n].rel!=="stylesheet")break;case"STYLE":e.head.appendChild(r[n].cloneNode(!0));break}}this._events.emit("added",e)}deregisterDocument(e){let t=this._documents.indexOf(e);if(t==-1)return console.warn("Document not registered");if(this._documents[t]===this.main)return console.warn("Main document cannot be removed");this._documents.splice(t,1),this._events.emit("removed",e)}};const Z="@chocolatelibui/theme",be="0.2.1";let ee=class te{constructor(e){this.value=e}get ok(){return!0}get err(){return!1}expect(){return this.value}expectErr(e){throw new Error(e)}get unwrap(){return this.value}unwrapOr(){return this.value}andThen(e){return e(this.value)}orElse(){return this}map(e){return new te(e(this.value))}mapErr(){return this}get toOptional(){return new re(this.value)}safeUnwrap(){return this.value}};var T;const R=class R{constructor(e){S(this,T,void 0);d(this,T,new Error().stack),this.error=e}get valid(){return!1}get ok(){return!1}get err(){return!0}expect(e){throw new Error(e+`
Original `+l(this,T)+`
Expect Error`)}expectErr(){return this.error}get unwrap(){throw new Error(`Tried to unwrap Error
Original `+l(this,T)+`
Unwrap Error`)}unwrapOr(e){return e}andThen(){return this}orElse(e){return e(this.error)}map(){return this}mapErr(e){return new R(e(this.error))}get toOptional(){return new ne}get stack(){return l(this,T)}};T=new WeakMap;let G=R,re=class se{constructor(e){this.value=e}get valid(){return!0}get some(){return!0}get none(){return!1}expect(){return this.value}get unwrap(){return this.value}unwrapOr(){return this.value}andThen(e){return e(this.value)}orElse(){return this}map(e){return new se(e(this.value))}toResult(){return new ee(this.value)}};class ne{get valid(){return!1}get some(){return!1}get none(){return!0}expect(e){throw new Error(e)}get unwrap(){throw new Error("Tried to unwrap None")}unwrapOr(e){return e}andThen(){return this}orElse(e){return e()}map(){return this}toResult(e){return new G(e)}}function f(s){return new ee(s)}function v(s){return new re(s)}function L(){return new ne}class ve{constructor(e,t,r,n,i,o){if(e!==void 0&&(this.min=e),t!==void 0&&(this.max=t),r!==void 0&&(this.unit=r),n!==void 0)this.decimals=n,i!==void 0&&(this.step=i),o!==void 0&&(this.start=o);else if(i!==void 0){this.step=i;const c=String(i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(this.decimals=c?Math.max(0,(c[1]?c[1].length:0)-(c[2]?+c[2]:0)):0,o!==void 0){this.start=o;const h=String(o).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);this.decimals=Math.max(this.decimals,h?Math.max(0,(h[1]?h[1].length:0)-(h[2]?+h[2]:0)):0)}}}check(e){return"max"in this&&e>this.max?v(e+" is bigger than the limit of "+this.max):"min"in this&&e<this.min?v(e+" is smaller than the limit of "+this.max):L()}limit(e){return this.step&&(this.start?e=parseFloat((Math.round((e-this.start+Number.EPSILON)/this.step)*this.step+this.start).toFixed(this.decimals)):e=parseFloat((Math.round((e+Number.EPSILON)/this.step)*this.step).toFixed(this.decimals))),v(Math.min(this.max??1/0,Math.max(this.min??-1/0,e)))}related(){return v(this)}}let U=class{constructor(e){this.list=e}check(e){return e in this.list?L():v(String(e)+" is not in list")}limit(e){return v(e)}related(){return v(this)}};class ie{constructor(){this.subscribers=[]}subscribe(e,t){return this.subscribers.includes(e)?(console.warn("Function already registered as subscriber"),e):(this.onSubscribe(this.subscribers.length==0),this.subscribers.push(e),t&&this.then(r=>{e(r)}),e)}unsubscribe(e){const t=this.subscribers.indexOf(e);return t!=-1?(this.onUnsubscribe(this.subscribers.length==1),this.subscribers.splice(t,1)):console.warn("Subscriber not found with state",this,e),e}related(){return L()}onSubscribe(e){}onUnsubscribe(e){}inUse(){return!!this.subscribers.length}hasSubscriber(e){return this.subscribers.includes(e)}updateSubscribers(e){for(let t=0,r=this.subscribers.length;t<r;t++)try{this.subscribers[t](e)}catch(n){console.warn("Failed while calling subscribers ",n,this,this.subscribers[t])}}}var p,M,g;class fe extends ie{constructor(t,r,n){super();S(this,p,void 0);S(this,M,void 0);S(this,g,void 0);if(r&&d(this,M,r===!0?i=>{var o;return(o=l(this,g))!=null&&o.limit?l(this,g).limit(i).map(c=>f(c)):v(f(i))}:r),n&&d(this,g,n),typeof t=="function"){let i=new Promise(o=>{this.then=async c=>(d(this,p,t()),delete this.then,delete this.write,delete this.get,o(),c(l(this,p))),this.get=()=>(d(this,p,t()),delete this.then,delete this.write,delete this.get,o(),l(this,p))});this.write=o=>{i.then(()=>{delete this.write,this.write(o)})}}else d(this,p,t)}async then(t){return t(l(this,p))}get(){return l(this,p)}related(){var t;return(t=l(this,g))!=null&&t.related?l(this,g).related():L()}write(t){l(this,M)&&l(this,p).ok&&l(this,p).value!==t&&l(this,M).call(this,t).map(this.set.bind(this))}check(t){var r;return(r=l(this,g))!=null&&r.check?l(this,g).check(t):L()}limit(t){var r;return(r=l(this,g))!=null&&r.limit?l(this,g).limit(t):v(t)}set(t){d(this,p,t),this.updateSubscribers(t)}}p=new WeakMap,M=new WeakMap,g=new WeakMap;var b,D,w,X;let ye=(X=class extends ie{constructor(t,r,n){super();S(this,b,void 0);S(this,D,void 0);S(this,w,void 0);if(r&&d(this,D,r===!0?i=>{var o;return(o=l(this,w))!=null&&o.limit?l(this,w).limit(i).map(c=>f(c)):v(f(i))}:r),n&&d(this,w,n),t instanceof Promise)this.then=t.then.bind(t),t.then(i=>{d(this,b,i),delete this.then,delete this.write}),this.write=i=>{t.then(()=>{delete this.write,this.write(i)})};else if(typeof t=="function"){let i=new Promise(o=>{this.then=c=>{let h=t();return this.then=h.then.bind(h),h.then(m=>{d(this,b,m),delete this.then,delete this.write,o()}),h.then(c)}});this.write=o=>{i.then(()=>{delete this.write,this.write(o)})}}else d(this,b,t)}async then(t){return t(l(this,b))}related(){var t;return(t=l(this,w))!=null&&t.related?l(this,w).related():L()}write(t){l(this,D)&&l(this,b).ok&&l(this,b).value!==t&&l(this,D).call(this,t).map(this.set.bind(this))}check(t){var r;return(r=l(this,w))!=null&&r.check?l(this,w).check(t):L()}limit(t){var r;return(r=l(this,w))!=null&&r.limit?l(this,w).limit(t):v(t)}set(t){d(this,b,t),this.updateSubscribers(t)}get(){return l(this,b)}},b=new WeakMap,D=new WeakMap,w=new WeakMap,X),Y=localStorage["settings/packageVersions"],O={};try{O=Y?JSON.parse(Y):{}}catch{}let B,Se=(s,e,t,r)=>{let n;return O[s]!==e&&(n=O[s],O[s]=e,B&&clearTimeout(B),B=setTimeout(()=>{localStorage["settings/packageVersions"]=JSON.stringify(O)},1e3)),new F(s,t,r,n||void 0)};class Ee extends fe{constructor(e,t,r,n,i){super(e,n,i),this.name=t,this.description=r}}class Te extends ye{constructor(e,t,r,n,i){super(e,n,i),this.name=t,this.description=r}}class F{constructor(e,t,r,n){this.settings={},this.subGroups={},this.versionChanged=n,this.pathID=e,this.name=t,this.description=r}makeSubGroup(e,t,r){if(e in this.subGroups){console.warn("Sub group already registered "+e);return}return this.subGroups[e]=new F(this.pathID+"/"+e,t,r,this.versionChanged)}addSetting(e,t,r,n,i,o,c){if(e in this.settings)throw new Error("Settings already registered "+e);let h=localStorage[this.pathID+"/"+e],m=this.settings[e]=new Ee(()=>{if(h)try{if(this.versionChanged&&c){let u=c(JSON.parse(h),this.versionChanged);return localStorage[this.pathID+"/"+e]=JSON.stringify(u),f(u)}return f(JSON.parse(h))}catch{}let a;return typeof n=="function"?a=n():a=n,localStorage[this.pathID+"/"+e]=JSON.stringify(a),f(a)},t,r,i,o);return m.subscribe(a=>{localStorage[this.pathID+"/"+e]=JSON.stringify(a.unwrap)}),m}addSettingAsync(e,t,r,n,i,o,c){if(e in this.settings)throw new Error("Settings already registered "+e);let h=localStorage[this.pathID+"/"+e],m=this.settings[e]=new Te(async()=>{if(h)try{if(this.versionChanged&&c){let u=c(JSON.parse(h),this.versionChanged);return localStorage[this.pathID+"/"+e]=JSON.stringify(u),f(u)}return f(JSON.parse(h))}catch{}let a;return n instanceof Promise?a=await n:typeof n=="function"?a=await n():a=n,localStorage[this.pathID+"/"+e]=JSON.stringify(a),f(a)},t,r,i,o);return m.subscribe(a=>{localStorage[this.pathID+"/"+e]=JSON.stringify(a.unwrap)}),m}}let N=(s,e)=>{let t;return function(){return t||(t=new DOMParser().parseFromString(e,"image/svg+xml").firstChild,t.setAttribute("icon",s)),t.cloneNode(!0)}},Le=N("material_action_touch_app_rounded",'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><g><rect fill="none" height="24" width="24"/></g><g><g><path d="M18.19,12.44l-3.24-1.62c1.29-1,2.12-2.56,2.12-4.32c0-3.03-2.47-5.5-5.5-5.5s-5.5,2.47-5.5,5.5c0,2.13,1.22,3.98,3,4.89 v3.26c-2.15-0.46-2.02-0.44-2.26-0.44c-0.53,0-1.03,0.21-1.41,0.59L4,16.22l5.09,5.09C9.52,21.75,10.12,22,10.74,22h6.3 c0.98,0,1.81-0.7,1.97-1.67l0.8-4.71C20.03,14.32,19.38,13.04,18.19,12.44z M17.84,15.29L17.04,20h-6.3 c-0.09,0-0.17-0.04-0.24-0.1l-3.68-3.68l4.25,0.89V6.5c0-0.28,0.22-0.5,0.5-0.5c0.28,0,0.5,0.22,0.5,0.5v6h1.76l3.46,1.73 C17.69,14.43,17.91,14.86,17.84,15.29z M8.07,6.5c0-1.93,1.57-3.5,3.5-3.5s3.5,1.57,3.5,3.5c0,0.95-0.38,1.81-1,2.44V6.5 c0-1.38-1.12-2.5-2.5-2.5c-1.38,0-2.5,1.12-2.5,2.5v2.44C8.45,8.31,8.07,7.45,8.07,6.5z"/></g></g></svg>'),Me=N("material_device_dark_mode_rounded",'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><rect fill="none" height="24" width="24"/><path d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg>'),De=N("material_device_light_mode_rounded",'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><rect fill="none" height="24" width="24"/><path d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg>'),Oe=N("material_hardware_mouse_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 9c-.04-4.39-3.6-7.93-8-7.93S4.04 4.61 4 9v6c0 4.42 3.58 8 8 8s8-3.58 8-8V9zm-2 0h-5V3.16c2.81.47 4.96 2.9 5 5.84zm-7-5.84V9H6c.04-2.94 2.19-5.37 5-5.84zM18 15c0 3.31-2.69 6-6 6s-6-2.69-6-6v-4h12v4z"/></svg>'),_e=N("material_image_edit_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"/></svg>'),y=[],V={};const C=Se(Z,be,"Theme/UI","Settings for UI elements and and color themes");var J=(s=>(s.Light="light",s.Dark="dark",s))(J||{});const ke={light:{name:"Light",description:"Theme optimized for daylight",icon:De},dark:{name:"Dark",description:"Theme optimized for night time",icon:Me}},W=C.addSetting("theme","Theme","Theme to use for the UI",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",!0,new U(ke));W.subscribe(s=>{y.forEach(e=>{e.applyTheme(s.unwrap)})});const E=W;window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{W.write(s.matches?"dark":"light")});let Q=1;const ae=C.addSetting("scale","Scale","UI scale",100,!0,new ve(50,400,"%",0,1));ae.subscribe(s=>{Q=s.unwrap/100,y.forEach(e=>{e.applyScale(Q)})});const _=ae;var H=(s=>(s.THIN="thin",s.MEDIUM="medium",s.WIDE="wide",s))(H||{});const xe={thin:{name:"Thin",description:"Thin modern scrollbar"},medium:{name:"Medium",description:"Normal scrollbar"},wide:{name:"Wide",description:"Large touch friendly scrollbar"}},oe=C.addSetting("scrollbar","Scrollbar Mode","Size of the scrollbar to use","thin",!0,new U(xe));oe.subscribe(s=>{y.forEach(e=>{e.applyScrollbar(s.unwrap)})});const k=oe;var P=(s=>(s.MOUSE="mouse",s.PEN="pen",s.TOUCH="touch",s))(P||{});const Ie={mouse:{name:"Mouse",description:"Mouse input",icon:Oe},pen:{name:"Pen",description:"Pen input",icon:_e},touch:{name:"Touch",description:"Touch input",icon:Le}},le=C.addSetting("input","Input Mode","Setting for preffered input mode, changes UI elements to be more optimized for the selected input mode","touch",!0,new U(Ie));le.subscribe(s=>{y.forEach(e=>{e.applyInput(s.unwrap)})});const x=le;var A=(s=>(s.ALL="all",s.MOST="most",s.SOME="some",s.NONE="none",s))(A||{});const Ne={all:{name:"All",description:"All animations"},most:{name:"Most",description:"All but the heaviest animations"},some:{name:"Some",description:"Only the lightest animations"},none:{name:"None",description:"No animations"}},ce=C.addSetting("animation","Animation Level","Setting for animation level, changes the amount of animations used in the UI","all",!0,new U(Ne));ce.subscribe(s=>{y.forEach(e=>{e.applyAnimation(s.unwrap)})});const I=ce;let Ce=(s,e,t)=>(V[s]=new q(s,e,t),V[s]);class q{constructor(e,t,r){this.variables={},this.subGroups={},this.pathID=e,this.name=t,this.description=r}makeSubGroup(e,t,r){if(e in this.subGroups)throw new Error("Sub group already registered "+e);return this.subGroups[e]=new q(this.pathID+"/"+e,t,r)}makeVariable(e,t,r,n,i,o,c,h){if(e in this.variables)throw new Error("Settings already registered "+e);let m="--"+this.pathID+"/"+e,a=this.variables[m]={name:t,desc:r,vars:{[J.Light]:n,[J.Dark]:i},type:o,typeParams:c,example:h};for(let u=0;u<y.length;u++)y[u].applySingleProperty(m,a.vars)}applyThemes(e,t){for(const r in this.variables)e.setProperty(r,this.variables[r].vars[t]);for(const r in this.subGroups)this.subGroups[r].applyThemes(e,t)}}class ze{constructor(e){y.push(this),this._handler=e,this._listener=this._handler.events.on("added",t=>{this.applyAllToDoc(t.data)}),e.forDocuments(t=>{this.applyAllToDoc(t)})}destructor(){this._handler.events.off("added",this._listener);let e=y.indexOf(this);if(e==-1)return console.warn("Theme engine already destructed");y.splice(e,1)}async applyAllToDoc(e){this.applyScrollbarToDoc(e,(await k).unwrap),this.applyThemeToDoc(e,(await E).unwrap),this.applyInputToDoc(e,(await x).unwrap),this.applyScaleToDoc(e,(await _).unwrap/100),await new Promise(t=>{setTimeout(t,100)}),this.applyAnimationToDoc(e,(await I).unwrap)}applyScrollbar(e){this._handler.forDocuments(t=>{this.applyScrollbarToDoc(t,e)})}applyScrollbarToDoc(e,t){e.documentElement.style.setProperty("--scrollbar",{[H.THIN]:"0.4rem",[H.MEDIUM]:"1rem",[H.WIDE]:"1.875rem"}[t])}applyAnimation(e){this._handler.forDocuments(t=>{this.applyAnimationToDoc(t,e)})}applyAnimationToDoc(e,t){switch(e.documentElement.classList.remove("anim-all","anim-most","anim-some"),t){case A.ALL:e.documentElement.classList.add("anim-all");case A.MOST:e.documentElement.classList.add("anim-most");case A.SOME:e.documentElement.classList.add("anim-some");break}}applyTheme(e){this._handler.forDocuments(t=>{this.applyThemeToDoc(t,e)})}applyThemeToDoc(e,t){for(const r in V)V[r].applyThemes(e.documentElement.style,t)}applyScale(e){this._handler.forDocuments(t=>{this.applyScaleToDoc(t,e)})}applyScaleToDoc(e,t){e.documentElement.style.fontSize=t*16+"px"}applyInput(e){this._handler.forDocuments(t=>{this.applyInputToDoc(t,e)})}applyInputToDoc(e,t){let r=e.documentElement.style;switch(r.setProperty("--mouse","0"),r.setProperty("--pen","0"),r.setProperty("--touch","0"),e.documentElement.classList.remove("mouse","pen","touch"),t){case P.MOUSE:r.setProperty("--mouse","1"),e.documentElement.classList.add("mouse");break;case P.PEN:r.setProperty("--pen","1"),e.documentElement.classList.add("pen");break;case P.TOUCH:r.setProperty("--touch","1"),e.documentElement.classList.add("touch");break}}async applySingleProperty(e,t){let r=(await E).unwrap;this._handler.forDocuments(n=>{n.documentElement.style.setProperty(e,t[r])})}}let $=new we(document);new ze($);let K=Ce(Z,"TestVars","TestDescription");K.makeVariable("test","Test Name","Test Description","lightblue","black","Angle",void 0);K.makeVariable("testText","Test Name","Test Description","black","white","Angle",void 0);K.makeVariable("test2","Test 2 Name","Test 2 Description","test","asdf","Number",{min:0,max:1});let he=async s=>{let e=s.body.appendChild(document.createElement("select")),t=E.related().unwrap.list;for(const a in t){let u=e.appendChild(document.createElement("option"));u.innerHTML=a}e.addEventListener("change",async a=>{E.write(a.currentTarget.selectedOptions[0].innerHTML)}),e.value=E.get().unwrap,E.subscribe(a=>{e.value=a.unwrap});for(const a in t){let u=s.body.appendChild(document.createElement("button"));u.innerHTML=a,u.addEventListener("click",()=>{E.write(a)})}let r=s.body.appendChild(document.createElement("select")),n=k.related().unwrap.list;for(const a in n){let u=r.appendChild(document.createElement("option"));u.innerHTML=a}r.addEventListener("change",a=>{k.write(a.currentTarget.selectedOptions[0].innerHTML)}),r.value=k.get().unwrap,k.subscribe(a=>{r.value=a.unwrap});let i=s.body.appendChild(document.createElement("select")),o=I.related().unwrap.list;for(const a in o){let u=i.appendChild(document.createElement("option"));u.innerHTML=a}i.addEventListener("change",async a=>{I.write(a.currentTarget.selectedOptions[0].innerHTML)}),i.value=I.get().unwrap,I.subscribe(a=>{i.value=a.unwrap});let c=s.body.appendChild(document.createElement("input"));c.type="number",c.addEventListener("change",async()=>{_.write(c.valueAsNumber),c.valueAsNumber=(await _).unwrap}),c.valueAsNumber=(await _).unwrap,_.subscribe(a=>{c.valueAsNumber=a.unwrap});let h=s.body.appendChild(document.createElement("select")),m=x.related().unwrap.list;for(const a in m){let u=h.appendChild(document.createElement("option"));u.innerHTML=a}h.addEventListener("change",async a=>{x.write(a.currentTarget.selectedOptions[0].innerHTML)}),h.value=x.get().unwrap,x.subscribe(a=>{h.value=a.unwrap}),s.body.appendChild(document.createElement("div")).innerHTML="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum volutpat tortor non tempor viverra. Cras ullamcorper ligula massa, fringilla ornare sapien imperdiet ac. Nam sapien diam, lacinia eget ex sed, varius commodo lacus. Aliquam pharetra metus tortor, non congue metus viverra vel. Donec semper malesuada arcu, eget lobortis eros scelerisque."};he(document);let ue=document.body.appendChild(document.createElement("button"));ue.innerHTML="Open Window";ue.onclick=()=>{let s=window.open("","","popup");$.registerDocument(s.document,!0),s==null||s.addEventListener("unload",()=>{$.deregisterDocument(s.document)}),he(s.document)};
